$(document).ready(function() {
    var a, b, c = {
        init: function() {
            c.resize(),
                c.p0.init(1),
                c.BGM = $("#bgmusic")[0],
                c.MusicICO = $(".music-ico"),
                c.IsAni = !1
        },
        p0: {
            init: function(a) {
                var g, h, i, j, k, l, m, e = $("img").length, f = ["img/p1/bg.jpg", "img/p3/bg.jpg", "img/p4/bg.jpg", "img/p5/bg.jpg", "img/p6/bg.jpg", "img/p7/bg.jpg"];
                for (e += f.length,
                         g = 0,
                         c.p0.LoadNum = $("#loadNum"),
                         h = 100,
                         i = 0,
                         j = !1,
                         k = setInterval(function() {
                             if (j)
                                 return clearInterval(k),
                                     !1;
                             if (i++,
                                 i > 40) {
                                 if (h += 1,
                                     h >= 100)
                                     return j = !0,
                                         h = 100,
                                         c.p0.changeWidth(h),
                                         clearInterval(k),
                                         $(".page.show").removeClass("show"),
                                         c["p" + a].init(),
                                         !1;
                                 c.p0.changeWidth(h)
                             }
                         }, 50),
                         $("img").each(function() {
                             f.push($(this).attr("src"))
                         }),
                         e = f.length,
                         l = 0; e > l; l++)
                    m = new Image,
                        m.src = f[l],
                        m.onload = function() {
                            if (i = 0,
                                    g++,
                                    h = g / e,
                                    h *= 100,
                                    c.p0.changeWidth(h),
                                h > 95) {
                                if (j)
                                    return !1;
                                j = !0,
                                    clearInterval(k),
                                    $(".page.show").removeClass("show"),
                                    c["p" + a].init()
                            }
                        }
            },
            jump: function(a) {
                c.clear(),
                    $(".page.show").removeClass("show"),
                    c.Page = $("#page" + a),
                    c.ChangePage($(".page.show"), c.Page, "up"),
                    c.Page.addClass("show"),
                    c["p" + a].init()
            },
            bgm: function() {
                var a = c.MusicICO;
                a.hasClass("playing") ? (a.removeClass("playing"),
                    c.BGM.pause()) : (a.addClass("playing"),
                    c.BGM.play())
            },
            changeWidth: function(a) {
                a = parseInt(a),
                    c.p0.LoadNum.text(a)
            }
        },
        clear: function() {},
        p1: {
            init: function() {
                $(".head").show(),
                    $("#swiperArea").show(),
                    $(".menu").on("tap", c.munuChange),
                    c.Arrow = $(".arrow-wrapper"),
                    c.Arrow.show();
                var a = new Swiper("#swiperArea",{
                    initialSlide: 0,
                    direction: "vertical",
                    speed: 500,
                    followFinger: !0,
                    loop: !0,
                    preloadImages: !1,
                    onSlideChangeStart: function(a) {
                        4 == a.activeIndex || 5 == a.activeIndex ? c.Arrow.hide() : c.Arrow.show()
                    }
                });
                new Swiper("#swiperArea2",{
                    initialSlide: 0,
                    speed: 500,
                    followFinger: !0,
                    loop: !0,
                    preloadImages: !0,
                    pagination: ".p4-pagination",
                    onInit: function(a) {
                        swiperAnimateCache(a),
                            swiperAnimate(a)
                    },
                    onSlideChangeStart: function(a) {
                        swiperAnimate(a)
                    }
                }),
                    $(".nav li").tap(function() {
                        $(".head").height(50),
                            a.slideTo($(this).index() + 1, 1e3, !0)
                    })
            }
        },
        munuChange: function() {
            var a = $(".head");
            50 == a.height() ? a.height(258) : a.height(50)
        },
        ChangePage: function(a, b, d) {
            var e, f;
            return c.IsAni ? !1 : (c.IsAni = !0,
                e = "moveToTop",
                f = "moveFromBottom",
                "down" == d ? (e = "moveToBottom",
                    f = "moveFromTop") : "left" == d ? (e = "moveToLeft",
                    f = "moveFromRight") : "right" == d && (e = "moveToRight",
                    f = "moveFromLeft"),
                a.addClass(e + " animated").one("webkitAnimationEnd", function() {
                    $(this).removeClass("show animated " + e)
                }),
                b.addClass(f + " animated show").one("webkitAnimationEnd", function() {
                    c.IsAni = !1,
                        $(this).removeClass(f + " animated");
                    var d = b.attr("id");
                    d = d.substr(4),
                        c.Page = $("#page" + d),
                        c.clear(),
                        c["p" + d].init()
                }),
                void 0)
        },
        resize: function() {
            a = $(window).width(),
                b = $(window).height(),
                $(".wrap,.swiper-wrapper").width(a).height(b)
        }
    };
    c.init()
});
